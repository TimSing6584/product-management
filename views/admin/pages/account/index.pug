extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/delete_item.pug
block style
    link(href="/admin/css/account.css" rel="stylesheet")
block main
    if role.permissions.includes("account-view")
        h1 Accounts List

        +alert-success("5000")
        +alert-error("5000")
        if role.permissions.includes("account-create")
            a.btn.btn-outline-success(
                create-role
                href=`/admin/account/create`
            ) + New Account
        table.table.table-hover.table-sm
            thead
                tr
                    th N.o
                    th Avatar
                    th Full Name
                    th Role
                    th Email
                    if role.permissions.includes("account-edit" || "account-delete")
                        th Action
            tbody
                each item, index in accounts
                    tr
                        td #{index + 1}
                        td
                            img(
                                src=item.avatar
                                avatar-account
                                width= item.avatar? "100px" : "0px"
                                height= item.avatar? "100px" : "0px"
                            )
                        td #{item.fullname}
                        td #{item.role.name}
                        td #{item.email}
                        if role.permissions.includes("account-edit" || "account-delete")
                            td
                                if role.permissions.includes("account-edit")
                                    a(
                                        class="btn btn-warning btn-sm"
                                        href=`/admin/account/edit/${item.id}`
                                        modify-account

                                    ) Modify
                                if role.permissions.includes("account-delete")
                                    button(
                                        class="btn btn-danger btn-sm ml-1 delete"
                                        data-id=item.id
                                        delete-account
                                    ) Delete
        +delete_item("account")
    else
        h1 Oops !!! You need authorization to access
block script
    //- script(src="/admin/js/account.js")
