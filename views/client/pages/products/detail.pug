extends ../../layouts/default.pug
include ../../../utils/alert.pug
block style
    link(href="/client/css/product.css" rel="stylesheet")
block main
    +alert-success("3000")
    .product-detail
        .product-grid
            .product-image
                if product.images
                    img(src=product.images, alt=product.title)

            .product-info
                .info-item
                    strong Title:
                    span= product.title

                .info-item
                    strong Price:
                    if product.discountPercentage > 0
                        span.price-new $#{(((100 - product.discountPercentage) * product.price) / 100).toFixed(0)}
                        span.price-old $#{product.price}
                        span.price-discount -#{product.discountPercentage}%
                    else
                        span.price-new $#{product.price}

                .info-item
                    strong Stock:
                    span #{product.stock}
                .info-item
                    strong Sold:
                    span #{product.sold}
                .info-item
                    strong Category:
                    span #{product.category.name}
                .cart-section
                    form.cart-form(
                        action=`/cart/add/${product.id}`
                        method="POST"
                    )
                        .quantity-wrapper
                            label.quantity-label Quantity:
                            .quantity-control
                                button.qty-btn(type="button" onclick="this.parentElement.querySelector('input').stepDown()") âˆ’
                                input.qty-input(
                                    type="number"
                                    name="quantity"
                                    value="1"
                                    min="1"
                                    max=product.stock
                                )
                                button.qty-btn(type="button" onclick="this.parentElement.querySelector('input').stepUp()") +
                        button.add-to-cart-btn(type="submit")
                            i.fa-solid.fa-cart-shopping
                            span Add to Cart

        if product.description
            .description-section
                strong Description:
                p.description-text= product.description


    .mt-4.text-end
        a.btn.btn-secondary(
            back-button
            href="/product" onclick="if (history.length > 1) { history.back(); return false; }"
        ) Back